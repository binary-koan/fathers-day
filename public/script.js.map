{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/main.coffee","src/scripts/dot.coffee","src/scripts/state.coffee","src/scripts/util.coffee","src/states/1.coffee"],"names":[],"mappings":"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","file":"script.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","paper.install window\npaper.setup 'container'\n\n{ setState } = require('./scripts/util')\nInitialState = require('./states/1')\n\nsetState(new InitialState())\n","{ s } = require('./util')\r\n\r\nmodule.exports =\r\nclass Dot extends Group\r\n  constructor: (position) ->\r\n    @circle = new Path.Circle\r\n      position: s(0, 0)\r\n      radius: 45\r\n      fillColor: 'white'\r\n    @face = new Raster(source: 'images/faces-01.png', size: s(50, 50))\r\n    super(children: [@circle, @face], position: view.center)\r\n\r\n  setFace: (face) ->\r\n    switch face\r\n      when ''\r\n        @face.source = null\r\n      when ':|'\r\n        @face.source = 'images/faces-01.png'\r\n      when ':)'\r\n        @face.source = 'images/faces-02.png'\r\n      when ';)'\r\n        @face.source = 'images/faces-03.png'\r\n","{ p } = require('./util')\r\n\r\nmodule.exports =\r\nclass State\r\n  onMouseMove: ->\r\n\r\n  onFrame: (event) ->\r\n    if not @_sequenceIndex?\r\n      @_sequence = @sequence()\r\n      @_sequenceFinished = (@_sequence.length == 0)\r\n      @_sequenceIndex = 0\r\n\r\n    @_continueSequence(event)\r\n    @_continueText() if @_showingText\r\n\r\n  nextFrame: ->\r\n\r\n  sequence: -> []\r\n\r\n  _continueSequence: (event) ->\r\n    part = @_sequence[@_sequenceIndex]\r\n    if @_sequenceFinished\r\n      @nextFrame(event)\r\n    else if @_sequenceWaitTime?\r\n      if @_sequenceWaitTime < part.waitTime\r\n        @_sequenceWaitTime += event.delta\r\n      else\r\n        @_sequenceWaitTime = null\r\n        @_runNextInSequence event\r\n    else if part.endCondition\r\n      if part.endCondition()\r\n        @_runNextInSequence event\r\n      else\r\n        part.action(event)\r\n\r\n  _runNextInSequence: (event) ->\r\n    @_sequenceIndex++\r\n    if @_sequenceIndex >= @_sequence.length\r\n      @_sequenceFinished = true\r\n    else\r\n      part = @_sequence[@_sequenceIndex]\r\n      @_sequenceWaitTime = 0 if part.waitTime\r\n      part.setup() if part.setup\r\n      part.action(event)\r\n\r\n  showText: (dot, text) ->\r\n    @_textItem ?= @_setupText()\r\n    @_textItem.opacity = 1.75\r\n    @_textItem.content = text\r\n    @_textItem.point = p(\r\n      dot.bounds.center.x - (@_textItem.bounds.width / 2)\r\n      dot.bounds.top - (@_textItem.bounds.height / 2)\r\n    )\r\n    @_showingText = true\r\n\r\n  _setupText: ->\r\n    new PointText\r\n      fillColor: 'white'\r\n      fontFamily: 'sans-serif'\r\n      fontWeight: 'bold'\r\n      fontSize: 16\r\n      shadowColor: 'black'\r\n      shadowBlur: 2\r\n\r\n  _continueText: ->\r\n    if @_textItem.opacity == 0\r\n      @_showingText = false\r\n    else\r\n      @_textItem.point.y -= 0.3\r\n      @_textItem.opacity = Math.max(@_textItem.opacity - 0.015, 0)\r\n","window.mouseTool = new Tool()\r\nexports.setState =\r\nsetState = (state) ->\r\n  view.onFrame = state.onFrame.bind(state)\r\n  mouseTool.onMouseMove = state.onMouseMove.bind(state)\r\n  view.activeLayer = state.layer\r\n\r\nexports.loadBackground =\r\nloadBackground = (source) ->\r\n  image = new Raster(\"images/#{source}\", view.center)\r\n  image.resizeToFill = ->\r\n    image.position = view.center\r\n    scale = Math.max(view.size.width / image.width, view.size.height / image.height)\r\n    image.size = new Size(image.width * scale, image.height * scale)\r\n  image.onLoad = ->\r\n    image.resizeToFill()\r\n  image\r\n\r\nexports.p =\r\np = -> new Point(arguments...)\r\n\r\nexports.r =\r\nr = -> new Rectangle(arguments...)\r\n\r\nexports.s =\r\ns = -> new Size(arguments...)\r\n","{ loadBackground, p, r, s } = require('../scripts/util')\r\nState = require('../scripts/state')\r\nDot = require('../scripts/dot')\r\n\r\nmodule.exports =\r\nclass InitialState extends State\r\n  constructor: ->\r\n    super\r\n    @background = loadBackground('1.jpg')\r\n    @foreground = loadBackground('1-foreground.png')\r\n    @dot = new Dot(view.center)\r\n    @dot.opacity = 0\r\n    @dot.scale(0.2)\r\n    @layer = new Layer([@background, @foreground, @dot])\r\n\r\n  onMouseMove: (event) ->\r\n    if @_sequenceFinished && @dot.contains(event.point)\r\n      alert('done!')\r\n\r\n  sequence: -> [\r\n    {\r\n      action: =>\r\n        @dot.scale 1.1\r\n        @dot.opacity += 0.1\r\n      endCondition: =>\r\n        @dot.opacity >= 1\r\n    }\r\n    {\r\n      action: => @showText(@dot, 'Hi!')\r\n      waitTime: 2\r\n    }\r\n    {\r\n      setup: => @dot.setFace(':)')\r\n      action: => @showText(@dot, \"I'm going on an adventure!\")\r\n      waitTime: 2\r\n    }\r\n    {\r\n      setup: => @dot.setFace(';)')\r\n      action: => @showText(@dot, 'See if you can catch me!')\r\n      waitTime: 2\r\n    }\r\n    {\r\n      setup: =>\r\n        @_path = new Path([\r\n          p(500, 300), p(700, 100), p(800, 200), p(750, 250)\r\n        ])\r\n        @_path.smooth()\r\n        @_offset = 0\r\n        @_step = @_path.length / 30\r\n      action: =>\r\n        @_offset += @_step\r\n        @dot.position = @_path.getLocationAt(@_offset).point\r\n        # console.log('step: ' + @_step + '; ' + @_path.length / 2)\r\n        if Math.abs(@_offset - (@_path.length / 2)) < @_step / 2\r\n          @foreground.bringToFront()\r\n      endCondition: =>\r\n        @_offset >= (@_path.length - @_step)\r\n    }\r\n  ]\r\n\r\n  nextFrame: (event) ->\r\n    @dot.position.x = 750 + Math.sin(event.time) * 10\r\n"]}