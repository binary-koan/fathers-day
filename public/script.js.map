{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/main.coffee","src/scripts/dot.coffee","src/scripts/state.coffee","src/scripts/util.coffee","src/states/1.coffee","src/states/2.coffee"],"names":[],"mappings":"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","file":"script.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","paper.install window\n\n{ setState } = require('./scripts/util')\nInitialState = require('./states/1')\n\nwindow.onload = ->\n  paper.setup 'container'\n  setState(new InitialState())\n","{ s } = require('./util')\r\n\r\nmodule.exports =\r\nclass Dot extends Group\r\n  constructor: (position) ->\r\n    @circle = new Path.Circle\r\n      position: s(0, 0)\r\n      radius: 30\r\n      fillColor: 'white'\r\n    @face = new Raster(source: 'images/faces-01.png')\r\n    @face.onLoad = =>\r\n      @face.scale(0.7)\r\n      @face.onLoad = null\r\n    super(children: [@circle, @face], position: position)\r\n\r\n  setFace: (face) ->\r\n    switch face\r\n      when ''\r\n        @face.source = null\r\n      when ':|'\r\n        @face.source = 'images/faces-01.png'\r\n      when ':)'\r\n        @face.source = 'images/faces-02.png'\r\n      when ';)'\r\n        @face.source = 'images/faces-03.png'\r\n","{ loadBackground, p } = require('./util')\r\nDot = require('./dot')\r\n\r\nmodule.exports =\r\nclass State\r\n  constructor: (imageID, dotPosition) ->\r\n    @background = loadBackground('background' + imageID)\r\n    @foreground = loadBackground('foreground' + imageID)\r\n    @dot = new Dot(dotPosition)\r\n    @layer = new Layer([@background, @dot, @foreground])\r\n\r\n  onMouseMove: ->\r\n\r\n  onFrame: (event) ->\r\n    if not @_sequenceIndex?\r\n      @_sequence = @sequence()\r\n      @_sequenceFinished = (@_sequence.length == 0)\r\n      @_sequenceIndex = 0\r\n\r\n    @_continueSequence(event)\r\n    @_continueText() if @_showingText\r\n\r\n  nextFrame: ->\r\n\r\n  sequence: -> []\r\n\r\n  _continueSequence: (event) ->\r\n    part = @_sequence[@_sequenceIndex]\r\n    if @_sequenceFinished\r\n      @nextFrame(event)\r\n    else if @_sequenceWaitTime?\r\n      if @_sequenceWaitTime < part.waitTime\r\n        @_sequenceWaitTime += event.delta\r\n      else\r\n        @_sequenceWaitTime = null\r\n        @_runNextInSequence event\r\n    else if part.path\r\n      @_continuePath(part, event)\r\n    else if part.endCondition\r\n      if part.endCondition()\r\n        @_runNextInSequence event\r\n      else\r\n        part.action(event)\r\n\r\n  _continuePath: (part, event) ->\r\n    @_offset += @_step\r\n    if @_offset >= (part.path.length - @_step)\r\n      @_runNextInSequence(event)\r\n\r\n    @dot.position = part.path.getLocationAt(@_offset).point\r\n    part.during(part.path, event) if part.during\r\n\r\n  _runNextInSequence: (event) ->\r\n    @_sequenceIndex++\r\n    if @_sequenceIndex >= @_sequence.length\r\n      @_sequenceFinished = true\r\n    else\r\n      part = @_sequence[@_sequenceIndex]\r\n      if part.waitTime\r\n        @_sequenceWaitTime = 0 if part.waitTime\r\n      else if part.path\r\n        @_setupPath(part)\r\n      part.setup() if part.setup\r\n      part.action(event) if part.action\r\n\r\n  _setupPath: (part) ->\r\n    part.path.smooth()\r\n    @_offset = 0\r\n    @_step = part.path.length / 30\r\n\r\n  showText: (text) ->\r\n    @_textItem ?= @_setupText()\r\n    @_textItem.opacity = 1.75\r\n    @_textItem.content = text\r\n    @_textItem.point = p(\r\n      @dot.bounds.center.x - (@_textItem.bounds.width / 2)\r\n      @dot.bounds.top - (@_textItem.bounds.height / 2)\r\n    )\r\n    @_showingText = true\r\n\r\n  _setupText: ->\r\n    new PointText\r\n      fillColor: 'white'\r\n      fontFamily: 'sans-serif'\r\n      fontWeight: 'bold'\r\n      fontSize: 16\r\n      shadowColor: 'black'\r\n      shadowBlur: 2\r\n\r\n  _continueText: ->\r\n    if @_textItem.opacity == 0\r\n      @_showingText = false\r\n    else\r\n      @_textItem.point.y -= 0.3\r\n      @_textItem.opacity = Math.max(@_textItem.opacity - 0.015, 0)\r\n","window.mouseTool = new Tool()\r\nexports.setState =\r\nsetState = (state) ->\r\n  view.onFrame = state.onFrame.bind(state)\r\n  mouseTool.onMouseMove = state.onMouseMove.bind(state)\r\n  view.activeLayer = state.layer\r\n\r\nexports.loadBackground =\r\nloadBackground = (source) ->\r\n  image = new Raster(source, view.center)\r\n  image.resizeToFill = ->\r\n    image.position = view.center\r\n    scale = Math.max(view.size.width / image.width, view.size.height / image.height)\r\n    image.size = new Size(image.width * scale, image.height * scale)\r\n  image.onLoad = ->\r\n    image.resizeToFill()\r\n  image\r\n\r\nexports.p =\r\np = -> new Point(arguments...)\r\n\r\nexports.r =\r\nr = -> new Rectangle(arguments...)\r\n\r\nexports.s =\r\ns = -> new Size(arguments...)\r\n","{ setState, loadBackground, p, r, s } = require('../scripts/util')\r\nState = require('../scripts/state')\r\nDot = require('../scripts/dot')\r\n\r\nSecondState = require('./2')\r\n\r\nmodule.exports =\r\nclass InitialState extends State\r\n  constructor: ->\r\n    super('1', view.center)\r\n    @dot.opacity = 0\r\n    @dot.scale(0.2)\r\n    @dot.bringToFront()\r\n\r\n  onMouseMove: (event) ->\r\n    if @_sequenceFinished && @dot.contains(event.point)\r\n      @showText 'Wheeee!'\r\n      @_stateChanging = true\r\n\r\n  sequence: -> [\r\n    {\r\n      action: =>\r\n        @dot.scale 1.15\r\n        @dot.opacity += 0.1\r\n      endCondition: =>\r\n        @dot.opacity >= 1\r\n    }\r\n    {\r\n      action: => @showText 'Hi!'\r\n      waitTime: 2\r\n    }\r\n    {\r\n      setup: => @dot.setFace(':)')\r\n      action: => @showText \"I'm going on an adventure!\"\r\n      waitTime: 2\r\n    }\r\n    {\r\n      setup: => @dot.setFace(';)')\r\n      action: => @showText 'See if you can catch me!'\r\n      waitTime: 2\r\n    }\r\n    {\r\n      path: new Path([ p(500, 300), p(700, 100), p(800, 200), p(750, 250) ])\r\n      during: (path) =>\r\n        if Math.abs(@_offset - (path.length / 2)) < @_step / 2\r\n          @foreground.bringToFront()\r\n    }\r\n  ]\r\n\r\n  nextFrame: (event) ->\r\n    if @_stateChanging\r\n      if @dot.position.x > 900\r\n        setState(new SecondState())\r\n      else\r\n        @dot.position.x += 10\r\n    else\r\n      @dot.position.x = 750 + Math.sin(event.time) * 10\r\n","{ loadBackground, p, r, s } = require('../scripts/util')\r\nState = require('../scripts/state')\r\nDot = require('../scripts/dot')\r\n\r\nmodule.exports =\r\nclass SecondState extends State\r\n  constructor: ->\r\n    super('2', p(230, 75))\r\n\r\n  onMouseMove: (event) ->\r\n    if @dot.contains(event.point)\r\n      @_hovered = true\r\n      @showText 'Too slow!'\r\n\r\n  sequence: -> [\r\n    {\r\n      endCondition: => @_hovered\r\n      action: (event) =>\r\n        @dot.position.x = 230 + Math.sin(event.time) * 10\r\n    }\r\n    {\r\n      path: new Path([ p(230, 75), p(300, 25), p(400, 50), p(300, 300) ])\r\n    }\r\n  ]\r\n\r\n  # onMouseMove: (event) ->\r\n  #   if @_sequenceFinished && @dot.contains(event.point)\r\n  #     alert('done!')\r\n  #\r\n  # sequence: -> [\r\n  #   {\r\n  #     action: =>\r\n  #       @dot.scale 1.1\r\n  #       @dot.opacity += 0.1\r\n  #     endCondition: =>\r\n  #       @dot.opacity >= 1\r\n  #   }\r\n  #   {\r\n  #     action: => @showText(@dot, 'Hi!')\r\n  #     waitTime: 2\r\n  #   }\r\n  #   {\r\n  #     setup: => @dot.setFace(':)')\r\n  #     action: => @showText(@dot, \"I'm going on an adventure!\")\r\n  #     waitTime: 2\r\n  #   }\r\n  #   {\r\n  #     setup: => @dot.setFace(';)')\r\n  #     action: => @showText(@dot, 'See if you can catch me!')\r\n  #     waitTime: 2\r\n  #   }\r\n  #   {\r\n  #     setup: =>\r\n  #       @_path = new Path([\r\n  #         p(500, 300), p(700, 100), p(800, 200), p(750, 250)\r\n  #       ])\r\n  #       @_path.smooth()\r\n  #       @_offset = 0\r\n  #       @_step = @_path.length / 30\r\n  #     action: =>\r\n  #       @_offset += @_step\r\n  #       @dot.position = @_path.getLocationAt(@_offset).point\r\n  #       # console.log('step: ' + @_step + '; ' + @_path.length / 2)\r\n  #       if Math.abs(@_offset - (@_path.length / 2)) < @_step / 2\r\n  #         @foreground.bringToFront()\r\n  #     endCondition: =>\r\n  #       @_offset >= (@_path.length - @_step)\r\n  #   }\r\n  # ]\r\n  #\r\n  # nextFrame: (event) ->\r\n  #   @dot.position.x = 750 + Math.sin(event.time) * 10\r\n"]}